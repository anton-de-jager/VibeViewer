"use strict";(self.webpackChunkvibeViewer=self.webpackChunkvibeViewer||[]).push([[917],{2917:(P,g,i)=>{i.r(g),i.d(g,{AuthSignInModule:()=>q});var m=i(2510),u=i(4859),x=i(6709),l=i(9549),p=i(7392),d=i(4144),f=i(1572),I=i(5804),v=i(7775),_=i(5524),a=i(4006),A=i(3951),h=i(7423),S=i(3844),t=i(4650),Z=i(3071),w=i(1622),y=i(6429),C=i(2494),T=i(6895),J=i(430);const F=["signInNgForm"];function N(n,s){if(1&n&&(t.TgZ(0,"fuse-alert",25),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.Q6J("appearance","outline")("showIcon",!1)("type",e.alert.type)("@shake","error"===e.alert.type),t.xp6(1),t.hij(" ",e.alert.message," ")}}function U(n,s){if(1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e("email_required")," ")}}function Q(n,s){if(1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e("email_validation")," ")}}function b(n,s){1&n&&t._UZ(0,"mat-icon",26),2&n&&t.Q6J("svgIcon","heroicons_solid:eye")}function Y(n,s){1&n&&t._UZ(0,"mat-icon",26),2&n&&t.Q6J("svgIcon","heroicons_solid:eye-off")}function M(n,s){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e("sign_in")," ")}}function j(n,s){1&n&&t._UZ(0,"mat-progress-spinner",27),2&n&&t.Q6J("diameter",24)("mode","indeterminate")}function k(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",28)(1,"a",29),t.NdJ("click",function(o){t.CHM(e);const c=t.oxw(2);return t.KtG(c.navigateExternal(o,"https://play.google.com/store/apps/details?id=com.vibeviewer.app&gl=ZA"))}),t._UZ(2,"img",30),t.qZA()()}}const E=function(){return["/sign-up"]},G=function(){return["/forgot-password"]};function L(n,s){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),t._UZ(5,"img",5),t.qZA(),t.TgZ(6,"div",6),t._uU(7,"Sign in"),t.qZA(),t.TgZ(8,"div",7)(9,"div"),t._uU(10,"Don't have an account?"),t.qZA(),t.TgZ(11,"a",8),t._uU(12,"Sign up "),t.qZA()(),t.YNc(13,N,2,5,"fuse-alert",9),t.TgZ(14,"form",10,11)(16,"mat-form-field",12)(17,"mat-label"),t._uU(18),t.qZA(),t._UZ(19,"input",13),t.YNc(20,U,2,1,"mat-error",14),t.YNc(21,Q,2,1,"mat-error",14),t.qZA(),t.TgZ(22,"mat-form-field",12)(23,"mat-label"),t._uU(24),t.qZA(),t._UZ(25,"input",15,16),t.TgZ(27,"button",17),t.NdJ("click",function(){t.CHM(e);const o=t.MAs(26);return t.KtG(o.type="password"===o.type?"text":"password")}),t.YNc(28,b,1,1,"mat-icon",18),t.YNc(29,Y,1,1,"mat-icon",18),t.qZA(),t.TgZ(30,"mat-error"),t._uU(31),t.qZA()(),t.TgZ(32,"div",19)(33,"a",20),t._uU(34),t.qZA()(),t.TgZ(35,"button",21),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.signIn())}),t.YNc(36,M,2,1,"span",14),t.YNc(37,j,1,2,"mat-progress-spinner",22),t.qZA(),t.TgZ(38,"button",23),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.home())}),t._uU(39),t.qZA(),t._UZ(40,"hr"),t.YNc(41,k,3,0,"div",24),t.qZA()()()(),t.BQk()}if(2&n){const e=s.$implicit,r=t.MAs(26),o=t.oxw();t.xp6(11),t.Q6J("routerLink",t.DdM(20,E)),t.xp6(2),t.Q6J("ngIf",o.showAlert),t.xp6(1),t.Q6J("formGroup",o.signInForm),t.xp6(4),t.Oqu(e("email_address")),t.xp6(1),t.Q6J("formControlName","email"),t.xp6(1),t.Q6J("ngIf",o.signInForm.get("email").hasError("required")),t.xp6(1),t.Q6J("ngIf",o.signInForm.get("email").hasError("email")),t.xp6(3),t.Oqu(e("password")),t.xp6(1),t.Q6J("formControlName","password"),t.xp6(3),t.Q6J("ngIf","password"===r.type),t.xp6(1),t.Q6J("ngIf","text"===r.type),t.xp6(2),t.hij(" ",e("password_required")," "),t.xp6(2),t.Q6J("routerLink",t.DdM(21,G)),t.xp6(1),t.hij("",e("forgot_password")," "),t.xp6(1),t.Q6J("color","primary")("disabled",o.signInForm.disabled),t.xp6(1),t.Q6J("ngIf",!o.signInForm.disabled),t.xp6(1),t.Q6J("ngIf",o.signInForm.disabled),t.xp6(2),t.hij(" ",e("home")," "),t.xp6(2),t.Q6J("ngIf",o.showPlayStore)}}const R=[{path:"",component:(()=>{class n{constructor(e,r,o,c,B,K){this._activatedRoute=e,this._formBuilder=r,this._router=o,this.userService=c,this.tokenService=B,this.eventEmitterService=K,this.alert={type:"success",message:""},this.showAlert=!1,this.showPlayStore="web"===h.dV.getPlatform()}ngOnInit(){this.signInForm=this._formBuilder.group({email:[localStorage.getItem("login_email")?localStorage.getItem("login_email"):"",[a.kI.required,a.kI.email]],password:[localStorage.getItem("login_password")?localStorage.getItem("login_password"):"",a.kI.required],rememberMe:[""]})}signIn(){this.signInForm.invalid||(this.signInForm.disable(),this.showAlert=!1,localStorage.setItem("login_email",this.signInForm.controls.email.value),localStorage.setItem("login_password",this.signInForm.controls.password.value),this.userService.login({email:this.signInForm.controls.email.value,password:this.signInForm.controls.password.value}).subscribe({next:r=>{console.debug(`logged in successfully ${r}`),this.tokenService.saveSession(r);const o=this._activatedRoute.snapshot.queryParamMap.get("redirectURL")||"/signed-in-redirect";this._router.navigateByUrl(o)},error:r=>{console.log(r),this.signInForm.enable(),this.alert={type:"error",message:"Wrong email or password"},this.showAlert=!0}}))}home(){this.eventEmitterService.onChangePage("home"),this._router.navigate(["home"])}navigateExternal(e,r){e.preventDefault(),h.dV.isNativePlatform?A.A.open({url:r}):window.open(r,"_blank")}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(m.gz),t.Y36(a.qu),t.Y36(m.F0),t.Y36(Z.K),t.Y36(w.B),t.Y36(y.Y))},n.\u0275cmp=t.Xpm({type:n,selectors:[["auth-sign-in"]],viewQuery:function(e,r){if(1&e&&t.Gf(F,5),2&e){let o;t.iGM(o=t.CRH())&&(r.signInNgForm=o.first)}},decls:1,vars:0,consts:[[4,"transloco"],[1,"flex","flex-col","flex-auto","items-center","sm:justify-center","min-w-0"],[1,"w-full","sm:w-auto","py-8","px-4","sm:p-12","sm:rounded-2xl","sm:shadow","sm:bg-card"],[1,"w-full","max-w-80","sm:w-80","mx-auto","sm:mx-0"],[1,"w-12"],["src","assets/images/logo/logo-text.png"],[1,"mt-8","text-4xl","font-extrabold","tracking-tight","leading-tight"],[1,"flex","items-baseline","mt-0.5","font-medium"],[1,"ml-1","text-primary-500","hover:underline",3,"routerLink"],["class","mt-8 -mb-4",3,"appearance","showIcon","type",4,"ngIf"],[1,"mt-8",3,"formGroup"],["signInNgForm","ngForm"],[1,"w-full"],["id","email","matInput","",3,"formControlName"],[4,"ngIf"],["id","password","matInput","","type","password",3,"formControlName"],["passwordField",""],["mat-icon-button","","type","button","matSuffix","",3,"click"],["class","icon-size-5",3,"svgIcon",4,"ngIf"],[1,"inline-flex","items-center","w-full","mt-1.5"],[1,"text-md","font-medium","text-primary-500","hover:underline",3,"routerLink"],["mat-flat-button","",1,"fuse-mat-button-large","w-full","mt-6",3,"color","disabled","click"],[3,"diameter","mode",4,"ngIf"],["mat-flat-button","",1,"fuse-mat-button-large","w-full","mt-6",3,"click"],["class","d-flex flex-column flex-lg-row align-items-center p-12",4,"ngIf"],[1,"mt-8","-mb-4",3,"appearance","showIcon","type"],[1,"icon-size-5",3,"svgIcon"],[3,"diameter","mode"],[1,"d-flex","flex-column","flex-lg-row","align-items-center","p-12"],["href","",1,"max-w-80","w-full","mt-0",3,"click"],["src","assets/img/google-play-badge.svg","alt","...",1,"app-badge"]],template:function(e,r){1&e&&t.YNc(0,L,42,22,"ng-container",0)},dependencies:[m.yS,u.lW,l.TO,l.KE,l.hX,l.R9,p.Hw,d.Nt,f.Ou,C.W,T.O5,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u,J.KI],encapsulation:2,data:{animation:S.L}}),n})()}];let q=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[m.Bz.forChild(R),u.ot,x.p9,l.lN,p.Ps,d.c,f.Cq,I.J,v.fC,_.m]}),n})()}}]);